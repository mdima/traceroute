function initMap(){map=L.map("map",{preferCanvas:!0}).setView([0,0],2);L.Icon.Default.imagePath="lib/leaflet/images/";const n=L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap<\/a>'}).addTo(map);L.Map.include({getMarkerById:function(n){var t=null;return this.eachLayer(function(i){i instanceof L.Marker&&i.options.id===n&&(t=i)}),t}})}function addMarker(n,t,i,r){var u=L.marker([n,t],{id:"marker_"+i}).bindTooltip(i,{permanent:!0,direction:"right"}).on("mouseover",hilightHopTable).on("click",function(){ipDetailsJS(r)}).addTo(map);markers.push[u]}function ipDetailsJS(n){var t=angular.element(document.querySelector("body")).controller();t.IpDetails(n)}function hilightHopTable(){var t=this.getTooltip(),n=".tr_hop_"+t.getContent();$(n).addClass("highlight");setTimeout(function(){$(n).removeClass("highlight")},2e3)}function hilightTooltip(n){const i=$(n).data("index-value"),t=map.getMarkerById("marker_"+i);t!=null&&($(t._icon).addClass("highlight"),setTimeout(function(){$(t._icon).removeClass("highlight")},1e3))}function clearMarkersAndPaths(){map.eachLayer(n=>{(n._latlng!=undefined||n._path!=undefined)&&n.remove()});markers=[];polyline=undefined}function drawPath(n){var t=[],i;if(n.find(n=>n.details==undefined||n.details.isp==undefined)==undefined){for(let r=0;r<n.length;r++)n[r].details&&n[r].details.latitude&&n[r].details.longitude&&(i=new L.latLng(n[r].details.latitude,n[r].details.longitude),t.push(i));polyline=L.polyline(t,{color:"red"}).addTo(map);map.fitBounds(polyline.getBounds())}}function hideKeyboard(){document.activeElement.blur();$("input").trigger("blur")}function SetSettings(){var n=angular.element(document.querySelector("body")).controller();n.$http.post("api/settings/",{hostRemoteTraces:n.hostRemoteTraces,enableRemoteTraces:n.enableRemoteTraces}).then(function(t){if(theResponse=angular.fromJson(t),!theResponse){n.ErrorDescription="The settings could not be saved";let t=bootstrap.Toast.getOrCreateInstance($("#ToastError"));t.show()}n.getSettings()}).catch(t=>{n.ErrorDescription="Could not save the settings";let i=bootstrap.Toast.getOrCreateInstance($("#ToastError"));i.show();console.error("An error occurred:",t)})}var map,polyline,markers=[];